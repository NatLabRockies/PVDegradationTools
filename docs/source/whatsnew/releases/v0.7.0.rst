v0.7.0 (2025-10-22)
===================

Breaking Changes
----------------
- Update NSRDB weather data retrieval to use PSM v4 instead of
  PSM v3. Instances of ``pvlib.iotools.get_psm3()`` replaced with
  ``pvlib.iotools.get_nsrdb_psm4_tmy()``. (:issue:`286`, :pull:`287`)
- Enable multi-material handling in the Scenario class:
    - Allow `material` parameter in `scenario.addModule()` to be a nested dictionary of
      multiple materials from different materials files
    - Update `utilities._add_material()` and `scenario.add_material()` to support this
      functionality.


Enhancements
------------
- Add Python 3.13 support. (:issue:`279`, :pull:`281`)
- Remove `kinetic_parameters.json` and merged parameters into
  'DegradationDatabase.json`. (:issue:`176`, :pull:`248`)


Enhancements
------------
- Restructure tutorial notebooks and migrate from ``tutorials_and_tools/`` to new
  ``tutorials/`` directory with improved organization. (:pull:`302`)
    - Reorganize tutorials into logical themed folders: ``01_basics`` (4 notebooks),
      ``02_degradation`` (6 notebooks), ``03_monte_carlo`` (2 notebooks),
      ``04_scenario`` (3 notebooks), ``05_geospatial`` (5 notebooks),
      ``06_advanced`` (4 notebooks), ``10_workshop_demos`` (2 notebooks), and
      ``tools`` (3 tool notebooks).
    - Update notebooks to load pre-saved weather data by default to avoid API rate
      limits: ``03_monte_carlo/01_arrhenius.ipynb`` (Miami),
      ``01_basics/04_weather_database_access.ipynb`` (Golden, CO).
    - Add jupytext configuration and Python script versions for all notebooks with
      pre-commit hook synchronization.
    - Update Eagle HPC references to Kestrel (NREL's current HPC system).
    - Update all configuration files (``_toc.yml``, ``_config.yml``, ``myst.yml``),
      GitHub Actions workflows (``nbval.yaml``, ``testbook.yaml``,
      ``deploy-books.yml``), and CI/CD pipelines for new structure.
- Add pysam module to support InSPIRE Agrivoltaics geospatial simulations. Currently our
  pysam wrapper implementation is largely project specific. We aim to generalize this
  module in the future to support out of the box geospatial pysam calculations for all
  users. (:pull:`252`)
    - Expert options added to `pvdeg.geospatial.analysis`. Details are as follows:
    - `preserve_gid_dim` optional boolean flag. Keeps model outputs in ``gid`` dimension
      rather than converting to ``latitude``, ``longitude`` domain.
    - `compute` optional boolean flag. Prevents eager computation inside of anlysis
      function.
      ``analysis(..., compute=False)`` will return a ``dask.Delayed`` object which can
      be used to build a task graph.
- Add new (public) module :py:mod:`pvdeg.pysam` to wrap NREL-PySAM for easy SAM
  simulations.
  - Add new (public) functions as follows:
    - :py:mod:`pvdeg.pysam.pysam()` to run SAM simulations.
    - :py:mod:`optimal_gcr_pitch()` to calculate optimal gcr and pitch for fixed tilt bifacial systems according to latitude and optimal GCR parameters.
    - :py:mod:`inspire_practical_pitch()` to calcuate tilt, pitch, and gcr for practically constrained systems according to :py:mod:`optimal_gcr_pitch()`
    - :py:mod:`inspire_ground_irradiance()` to calculate inter-row ground irradiance for the InSPIRE agrivoltaics irradiance dataset.
    - :py:mod:`solar_resource_dict()` to create solar_resource collections for SAM input from PVDeg weather and metadata.


Deprecations
-------------
- Drop Python 3.9 support. The minimum supported Python version is now 3.10. (:issue:`279`, :pull:`281`)


Bug Fixes
---------
- Update MD5 checksum references in documentation from old hash to new hash (:pull:`276`)


Dependencies
------------
- Pin h5py<=3.14.0 (:issue:`278`, :pull:`277`)


Contributors
------------
- Rajiv Daxini (:ghuser:`RDaxini`)
- Martin Springer (:ghuser:`martin-springer`)
- Tobin Ford (:ghuser:`tobin-ford`)
